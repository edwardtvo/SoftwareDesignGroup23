function cov_2nsbxxwmav(){var path="/home/cdooley/Documents/2021_Spring/SoftwareDesign/SoftwareDesignGroup23/fuel-quote-app/server/routes/middleware.js";var hash="3ad6db6a0ef25ab5e4dc965081aa85ea9b5fdce3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/cdooley/Documents/2021_Spring/SoftwareDesign/SoftwareDesignGroup23/fuel-quote-app/server/routes/middleware.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:2,column:15},end:{line:2,column:30}},"2":{start:{line:4,column:18},end:{line:31,column:1}},"3":{start:{line:5,column:16},end:{line:8,column:21}},"4":{start:{line:10,column:4},end:{line:10,column:32}},"5":{start:{line:11,column:4},end:{line:11,column:33}},"6":{start:{line:12,column:4},end:{line:12,column:35}},"7":{start:{line:13,column:4},end:{line:13,column:29}},"8":{start:{line:16,column:5},end:{line:16,column:45}},"9":{start:{line:17,column:5},end:{line:17,column:40}},"10":{start:{line:19,column:4},end:{line:30,column:5}},"11":{start:{line:20,column:8},end:{line:20,column:64}},"12":{start:{line:22,column:8},end:{line:29,column:10}},"13":{start:{line:23,column:12},end:{line:28,column:13}},"14":{start:{line:24,column:16},end:{line:24,column:68}},"15":{start:{line:26,column:16},end:{line:26,column:48}},"16":{start:{line:27,column:16},end:{line:27,column:23}},"17":{start:{line:33,column:0},end:{line:33,column:26}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:41},end:{line:31,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:34},end:{line:22,column:35}},loc:{start:{line:22,column:52},end:{line:29,column:9}},line:22}},branchMap:{"0":{loc:{start:{line:5,column:16},end:{line:8,column:21}},type:"binary-expr",locations:[{start:{line:5,column:16},end:{line:5,column:30}},{start:{line:6,column:4},end:{line:6,column:19}},{start:{line:7,column:4},end:{line:7,column:33}},{start:{line:8,column:4},end:{line:8,column:21}}],line:5},"1":{loc:{start:{line:19,column:4},end:{line:30,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:30,column:5}},{start:{line:19,column:4},end:{line:30,column:5}}],line:19},"2":{loc:{start:{line:23,column:12},end:{line:28,column:13}},type:"if",locations:[{start:{line:23,column:12},end:{line:28,column:13}},{start:{line:23,column:12},end:{line:28,column:13}}],line:23}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},f:{"0":0,"1":0},b:{"0":[0,0,0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3ad6db6a0ef25ab5e4dc965081aa85ea9b5fdce3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2nsbxxwmav=function(){return actualCoverage;};}return actualCoverage;}cov_2nsbxxwmav();const jwt=(cov_2nsbxxwmav().s[0]++,require('jsonwebtoken'));const secret=(cov_2nsbxxwmav().s[1]++,'group23secret');cov_2nsbxxwmav().s[2]++;const withAuth=function(req,res,next){cov_2nsbxxwmav().f[0]++;let token=(cov_2nsbxxwmav().s[3]++,(cov_2nsbxxwmav().b[0][0]++,req.body.token)||(cov_2nsbxxwmav().b[0][1]++,req.query.token)||(cov_2nsbxxwmav().b[0][2]++,req.headers['x-access-token'])||(cov_2nsbxxwmav().b[0][3]++,req.cookies.token));cov_2nsbxxwmav().s[4]++;console.log(req.body.token);cov_2nsbxxwmav().s[5]++;console.log(req.query.token);cov_2nsbxxwmav().s[6]++;console.log(req.cookies.token);cov_2nsbxxwmav().s[7]++;console.log(req.cookies);cov_2nsbxxwmav().s[8]++;console.log('Token on middleware.js: ');cov_2nsbxxwmav().s[9]++;console.log(JSON.stringify(token));cov_2nsbxxwmav().s[10]++;if(!token){cov_2nsbxxwmav().b[1][0]++;cov_2nsbxxwmav().s[11]++;res.status(801).send('Unauthorized: No token provided');}else{cov_2nsbxxwmav().b[1][1]++;cov_2nsbxxwmav().s[12]++;jwt.verify(token,secret,(err,decoded)=>{cov_2nsbxxwmav().f[1]++;cov_2nsbxxwmav().s[13]++;if(err){cov_2nsbxxwmav().b[2][0]++;cov_2nsbxxwmav().s[14]++;res.status(401).send('Unauthorized: invalid token');}else{cov_2nsbxxwmav().b[2][1]++;cov_2nsbxxwmav().s[15]++;req.username=decoded.username;cov_2nsbxxwmav().s[16]++;next();}});}};cov_2nsbxxwmav().s[17]++;module.exports=withAuth;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pZGRsZXdhcmUuanMiXSwibmFtZXMiOlsiand0IiwicmVxdWlyZSIsInNlY3JldCIsIndpdGhBdXRoIiwicmVxIiwicmVzIiwibmV4dCIsInRva2VuIiwiYm9keSIsInF1ZXJ5IiwiaGVhZGVycyIsImNvb2tpZXMiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsInNlbmQiLCJ2ZXJpZnkiLCJlcnIiLCJkZWNvZGVkIiwidXNlcm5hbWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoia3lGQWVZOzJGQWZaLEtBQU1BLENBQUFBLEdBQUcsMEJBQUdDLE9BQU8sQ0FBQyxjQUFELENBQVYsQ0FBVCxDQUNBLEtBQU1DLENBQUFBLE1BQU0sMEJBQUcsZUFBSCxDQUFaLEMsd0JBRUEsS0FBTUMsQ0FBQUEsUUFBUSxDQUFJLFNBQVNDLEdBQVQsQ0FBYUMsR0FBYixDQUFpQkMsSUFBakIsQ0FBdUIseUJBQ3JDLEdBQUlDLENBQUFBLEtBQUssMEJBQUcsNEJBQUFILEdBQUcsQ0FBQ0ksSUFBSixDQUFTRCxLQUFULCtCQUNaSCxHQUFHLENBQUNLLEtBQUosQ0FBVUYsS0FERSwrQkFFWkgsR0FBRyxDQUFDTSxPQUFKLENBQVksZ0JBQVosQ0FGWSwrQkFHWk4sR0FBRyxDQUFDTyxPQUFKLENBQVlKLEtBSEEsQ0FBSCxDQUFULENBRHFDLHdCQU1yQ0ssT0FBTyxDQUFDQyxHQUFSLENBQVlULEdBQUcsQ0FBQ0ksSUFBSixDQUFTRCxLQUFyQixFQU5xQyx3QkFPckNLLE9BQU8sQ0FBQ0MsR0FBUixDQUFZVCxHQUFHLENBQUNLLEtBQUosQ0FBVUYsS0FBdEIsRUFQcUMsd0JBUXJDSyxPQUFPLENBQUNDLEdBQVIsQ0FBWVQsR0FBRyxDQUFDTyxPQUFKLENBQVlKLEtBQXhCLEVBUnFDLHdCQVNyQ0ssT0FBTyxDQUFDQyxHQUFSLENBQVlULEdBQUcsQ0FBQ08sT0FBaEIsRUFUcUMsd0JBWXBDQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSwwQkFBWixFQVpvQyx3QkFhcENELE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxJQUFJLENBQUNDLFNBQUwsQ0FBZVIsS0FBZixDQUFaLEVBYm9DLHlCQWVyQyxHQUFJLENBQUNBLEtBQUwsQ0FBWSxxREFDUkYsR0FBRyxDQUFDVyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsaUNBQXJCLEVBQ0gsQ0FGRCxJQUVPLHFEQUNIakIsR0FBRyxDQUFDa0IsTUFBSixDQUFXWCxLQUFYLENBQWtCTCxNQUFsQixDQUEwQixDQUFDaUIsR0FBRCxDQUFNQyxPQUFOLEdBQWtCLGtEQUN4QyxHQUFJRCxHQUFKLENBQVMscURBQ0xkLEdBQUcsQ0FBQ1csTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLDZCQUFyQixFQUNILENBRkQsSUFFTyxxREFDSGIsR0FBRyxDQUFDaUIsUUFBSixDQUFlRCxPQUFPLENBQUNDLFFBQXZCLENBREcseUJBRUhmLElBQUksR0FDUCxDQUNKLENBUEQsRUFRSCxDQUNKLENBM0JELEMseUJBNkJBZ0IsTUFBTSxDQUFDQyxPQUFQLENBQWlCcEIsUUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmNvbnN0IHNlY3JldCA9ICdncm91cDIzc2VjcmV0JztcblxuY29uc3Qgd2l0aEF1dGggPSAgZnVuY3Rpb24ocmVxLHJlcyxuZXh0KSB7XG4gICAgbGV0IHRva2VuID0gcmVxLmJvZHkudG9rZW4gfHxcbiAgICByZXEucXVlcnkudG9rZW4gfHxcbiAgICByZXEuaGVhZGVyc1sneC1hY2Nlc3MtdG9rZW4nXSB8fFxuICAgIHJlcS5jb29raWVzLnRva2VuO1xuXG4gICAgY29uc29sZS5sb2cocmVxLmJvZHkudG9rZW4pO1xuICAgIGNvbnNvbGUubG9nKHJlcS5xdWVyeS50b2tlbik7XG4gICAgY29uc29sZS5sb2cocmVxLmNvb2tpZXMudG9rZW4pO1xuICAgIGNvbnNvbGUubG9nKHJlcS5jb29raWVzKTtcblxuXG4gICAgIGNvbnNvbGUubG9nKCdUb2tlbiBvbiBtaWRkbGV3YXJlLmpzOiAnKTtcbiAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodG9rZW4pKTtcblxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgcmVzLnN0YXR1cyg4MDEpLnNlbmQoJ1VuYXV0aG9yaXplZDogTm8gdG9rZW4gcHJvdmlkZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBzZWNyZXQsIChlcnIsIGRlY29kZWQpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCgnVW5hdXRob3JpemVkOiBpbnZhbGlkIHRva2VuJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcS51c2VybmFtZSA9IGRlY29kZWQudXNlcm5hbWU7XG4gICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3aXRoQXV0aDsiXX0=
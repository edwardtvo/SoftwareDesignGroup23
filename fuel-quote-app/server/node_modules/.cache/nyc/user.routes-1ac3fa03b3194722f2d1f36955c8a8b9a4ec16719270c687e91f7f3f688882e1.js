function cov_1f32pfe07z(){var path="/home/cdooley/Documents/2021_Spring/SoftwareDesign/SoftwareDesignGroup23/fuel-quote-app/server/routes/user.routes.js";var hash="7faabe8ac3bf8ff89a00f6db88d791d91fecf02e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/cdooley/Documents/2021_Spring/SoftwareDesign/SoftwareDesignGroup23/fuel-quote-app/server/routes/user.routes.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:2,column:15},end:{line:2,column:34}},"2":{start:{line:3,column:20},end:{line:3,column:50}},"3":{start:{line:5,column:13},end:{line:5,column:29}},"4":{start:{line:8,column:20},end:{line:8,column:136}},"5":{start:{line:9,column:15},end:{line:9,column:94}},"6":{start:{line:10,column:0},end:{line:180,column:7}},"7":{start:{line:12,column:19},end:{line:12,column:40}},"8":{start:{line:13,column:21},end:{line:13,column:42}},"9":{start:{line:14,column:29},end:{line:14,column:58}},"10":{start:{line:15,column:8},end:{line:15,column:55}},"11":{start:{line:18,column:8},end:{line:25,column:10}},"12":{start:{line:19,column:12},end:{line:23,column:15}},"13":{start:{line:20,column:16},end:{line:20,column:39}},"14":{start:{line:20,column:27},end:{line:20,column:39}},"15":{start:{line:21,column:16},end:{line:21,column:31}},"16":{start:{line:27,column:8},end:{line:34,column:10}},"17":{start:{line:28,column:12},end:{line:32,column:15}},"18":{start:{line:29,column:16},end:{line:29,column:39}},"19":{start:{line:29,column:27},end:{line:29,column:39}},"20":{start:{line:30,column:16},end:{line:30,column:31}},"21":{start:{line:37,column:8},end:{line:59,column:10}},"22":{start:{line:38,column:25},end:{line:38,column:61}},"23":{start:{line:39,column:12},end:{line:39,column:47}},"24":{start:{line:40,column:12},end:{line:58,column:14}},"25":{start:{line:50,column:16},end:{line:57,column:17}},"26":{start:{line:51,column:20},end:{line:51,column:36}},"27":{start:{line:52,column:20},end:{line:52,column:39}},"28":{start:{line:53,column:20},end:{line:53,column:39}},"29":{start:{line:55,column:20},end:{line:55,column:46}},"30":{start:{line:56,column:20},end:{line:56,column:83}},"31":{start:{line:61,column:8},end:{line:73,column:10}},"32":{start:{line:62,column:12},end:{line:70,column:15}},"33":{start:{line:63,column:16},end:{line:69,column:17}},"34":{start:{line:64,column:20},end:{line:64,column:111}},"35":{start:{line:65,column:20},end:{line:65,column:128}},"36":{start:{line:67,column:20},end:{line:67,column:90}},"37":{start:{line:68,column:20},end:{line:68,column:49}},"38":{start:{line:75,column:8},end:{line:97,column:10}},"39":{start:{line:78,column:12},end:{line:96,column:13}},"40":{start:{line:79,column:16},end:{line:79,column:85}},"41":{start:{line:80,column:16},end:{line:80,column:102}},"42":{start:{line:83,column:16},end:{line:95,column:18}},"43":{start:{line:84,column:20},end:{line:93,column:21}},"44":{start:{line:85,column:24},end:{line:85,column:78}},"45":{start:{line:86,column:24},end:{line:86,column:89}},"46":{start:{line:87,column:27},end:{line:93,column:21}},"47":{start:{line:88,column:24},end:{line:88,column:108}},"48":{start:{line:89,column:24},end:{line:89,column:98}},"49":{start:{line:91,column:24},end:{line:91,column:100}},"50":{start:{line:92,column:24},end:{line:92,column:50}},"51":{start:{line:99,column:8},end:{line:126,column:10}},"52":{start:{line:100,column:29},end:{line:100,column:46}},"53":{start:{line:101,column:12},end:{line:101,column:71}},"54":{start:{line:103,column:12},end:{line:124,column:14}},"55":{start:{line:104,column:16},end:{line:123,column:17}},"56":{start:{line:105,column:20},end:{line:105,column:39}},"57":{start:{line:106,column:20},end:{line:107,column:75}},"58":{start:{line:108,column:23},end:{line:123,column:17}},"59":{start:{line:109,column:20},end:{line:110,column:88}},"60":{start:{line:112,column:20},end:{line:122,column:22}},"61":{start:{line:113,column:24},end:{line:121,column:25}},"62":{start:{line:114,column:28},end:{line:115,column:83}},"63":{start:{line:116,column:31},end:{line:121,column:25}},"64":{start:{line:117,column:28},end:{line:118,column:87}},"65":{start:{line:120,column:28},end:{line:120,column:48}},"66":{start:{line:129,column:8},end:{line:160,column:10}},"67":{start:{line:130,column:12},end:{line:159,column:14}},"68":{start:{line:131,column:16},end:{line:157,column:17}},"69":{start:{line:132,column:20},end:{line:132,column:69}},"70":{start:{line:133,column:20},end:{line:133,column:56}},"71":{start:{line:135,column:34},end:{line:135,column:92}},"72":{start:{line:136,column:20},end:{line:153,column:22}},"73":{start:{line:138,column:28},end:{line:138,column:71}},"74":{start:{line:140,column:24},end:{line:152,column:27}},"75":{start:{line:144,column:28},end:{line:150,column:29}},"76":{start:{line:145,column:32},end:{line:145,column:51}},"77":{start:{line:146,column:32},end:{line:146,column:51}},"78":{start:{line:148,column:32},end:{line:148,column:51}},"79":{start:{line:149,column:32},end:{line:149,column:87}},"80":{start:{line:155,column:20},end:{line:155,column:50}},"81":{start:{line:162,column:8},end:{line:179,column:10}},"82":{start:{line:163,column:12},end:{line:178,column:14}},"83":{start:{line:171,column:16},end:{line:177,column:17}},"84":{start:{line:172,column:20},end:{line:172,column:39}},"85":{start:{line:173,column:20},end:{line:173,column:39}},"86":{start:{line:175,column:20},end:{line:175,column:47}},"87":{start:{line:176,column:20},end:{line:176,column:75}},"88":{start:{line:182,column:0},end:{line:182,column:15}},"89":{start:{line:183,column:0},end:{line:183,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:180,column:5}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:50},end:{line:25,column:9}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:19,column:34},end:{line:19,column:35}},loc:{start:{line:19,column:57},end:{line:23,column:13}},line:19},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:37},end:{line:27,column:38}},loc:{start:{line:27,column:57},end:{line:34,column:9}},line:27},"4":{name:"(anonymous_4)",decl:{start:{line:28,column:42},end:{line:28,column:43}},loc:{start:{line:28,column:65},end:{line:32,column:13}},line:28},"5":{name:"(anonymous_5)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:57},end:{line:59,column:9}},line:37},"6":{name:"(anonymous_6)",decl:{start:{line:49,column:31},end:{line:49,column:32}},loc:{start:{line:49,column:48},end:{line:58,column:13}},line:49},"7":{name:"(anonymous_7)",decl:{start:{line:61,column:32},end:{line:61,column:33}},loc:{start:{line:61,column:52},end:{line:73,column:9}},line:61},"8":{name:"(anonymous_8)",decl:{start:{line:62,column:78},end:{line:62,column:79}},loc:{start:{line:62,column:97},end:{line:70,column:13}},line:62},"9":{name:"(anonymous_9)",decl:{start:{line:75,column:37},end:{line:75,column:38}},loc:{start:{line:75,column:51},end:{line:97,column:9}},line:75},"10":{name:"(anonymous_10)",decl:{start:{line:83,column:60},end:{line:83,column:61}},loc:{start:{line:83,column:75},end:{line:95,column:17}},line:83},"11":{name:"(anonymous_11)",decl:{start:{line:99,column:37},end:{line:99,column:38}},loc:{start:{line:99,column:63},end:{line:126,column:9}},line:99},"12":{name:"(anonymous_12)",decl:{start:{line:103,column:56},end:{line:103,column:57}},loc:{start:{line:103,column:71},end:{line:124,column:13}},line:103},"13":{name:"(anonymous_13)",decl:{start:{line:112,column:69},end:{line:112,column:70}},loc:{start:{line:112,column:84},end:{line:122,column:21}},line:112},"14":{name:"(anonymous_14)",decl:{start:{line:129,column:37},end:{line:129,column:38}},loc:{start:{line:129,column:57},end:{line:160,column:9}},line:129},"15":{name:"(anonymous_15)",decl:{start:{line:130,column:61},end:{line:130,column:62}},loc:{start:{line:130,column:72},end:{line:159,column:13}},line:130},"16":{name:"(anonymous_16)",decl:{start:{line:137,column:30},end:{line:137,column:31}},loc:{start:{line:137,column:40},end:{line:139,column:25}},line:137},"17":{name:"(anonymous_17)",decl:{start:{line:139,column:32},end:{line:139,column:33}},loc:{start:{line:139,column:42},end:{line:153,column:21}},line:139},"18":{name:"(anonymous_18)",decl:{start:{line:143,column:44},end:{line:143,column:45}},loc:{start:{line:143,column:61},end:{line:152,column:25}},line:143},"19":{name:"(anonymous_19)",decl:{start:{line:162,column:42},end:{line:162,column:43}},loc:{start:{line:162,column:62},end:{line:179,column:9}},line:162},"20":{name:"(anonymous_20)",decl:{start:{line:170,column:32},end:{line:170,column:33}},loc:{start:{line:170,column:49},end:{line:178,column:13}},line:170}},branchMap:{"0":{loc:{start:{line:20,column:16},end:{line:20,column:39}},type:"if",locations:[{start:{line:20,column:16},end:{line:20,column:39}},{start:{line:20,column:16},end:{line:20,column:39}}],line:20},"1":{loc:{start:{line:29,column:16},end:{line:29,column:39}},type:"if",locations:[{start:{line:29,column:16},end:{line:29,column:39}},{start:{line:29,column:16},end:{line:29,column:39}}],line:29},"2":{loc:{start:{line:50,column:16},end:{line:57,column:17}},type:"if",locations:[{start:{line:50,column:16},end:{line:57,column:17}},{start:{line:50,column:16},end:{line:57,column:17}}],line:50},"3":{loc:{start:{line:63,column:16},end:{line:69,column:17}},type:"if",locations:[{start:{line:63,column:16},end:{line:69,column:17}},{start:{line:63,column:16},end:{line:69,column:17}}],line:63},"4":{loc:{start:{line:78,column:12},end:{line:96,column:13}},type:"if",locations:[{start:{line:78,column:12},end:{line:96,column:13}},{start:{line:78,column:12},end:{line:96,column:13}}],line:78},"5":{loc:{start:{line:78,column:16},end:{line:78,column:75}},type:"binary-expr",locations:[{start:{line:78,column:16},end:{line:78,column:40}},{start:{line:78,column:44},end:{line:78,column:75}}],line:78},"6":{loc:{start:{line:84,column:20},end:{line:93,column:21}},type:"if",locations:[{start:{line:84,column:20},end:{line:93,column:21}},{start:{line:84,column:20},end:{line:93,column:21}}],line:84},"7":{loc:{start:{line:87,column:27},end:{line:93,column:21}},type:"if",locations:[{start:{line:87,column:27},end:{line:93,column:21}},{start:{line:87,column:27},end:{line:93,column:21}}],line:87},"8":{loc:{start:{line:104,column:16},end:{line:123,column:17}},type:"if",locations:[{start:{line:104,column:16},end:{line:123,column:17}},{start:{line:104,column:16},end:{line:123,column:17}}],line:104},"9":{loc:{start:{line:108,column:23},end:{line:123,column:17}},type:"if",locations:[{start:{line:108,column:23},end:{line:123,column:17}},{start:{line:108,column:23},end:{line:123,column:17}}],line:108},"10":{loc:{start:{line:113,column:24},end:{line:121,column:25}},type:"if",locations:[{start:{line:113,column:24},end:{line:121,column:25}},{start:{line:113,column:24},end:{line:121,column:25}}],line:113},"11":{loc:{start:{line:116,column:31},end:{line:121,column:25}},type:"if",locations:[{start:{line:116,column:31},end:{line:121,column:25}},{start:{line:116,column:31},end:{line:121,column:25}}],line:116},"12":{loc:{start:{line:131,column:16},end:{line:157,column:17}},type:"if",locations:[{start:{line:131,column:16},end:{line:157,column:17}},{start:{line:131,column:16},end:{line:157,column:17}}],line:131},"13":{loc:{start:{line:144,column:28},end:{line:150,column:29}},type:"if",locations:[{start:{line:144,column:28},end:{line:150,column:29}},{start:{line:144,column:28},end:{line:150,column:29}}],line:144},"14":{loc:{start:{line:171,column:16},end:{line:177,column:17}},type:"if",locations:[{start:{line:171,column:16},end:{line:177,column:17}},{start:{line:171,column:16},end:{line:177,column:17}}],line:171}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7faabe8ac3bf8ff89a00f6db88d791d91fecf02e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1f32pfe07z=function(){return actualCoverage;};}return actualCoverage;}cov_1f32pfe07z();let express=(cov_1f32pfe07z().s[0]++,require('express'));const bcrypt=(cov_1f32pfe07z().s[1]++,require("bcryptjs"));const MongoClient=(cov_1f32pfe07z().s[2]++,require('mongodb').MongoClient);let router=(cov_1f32pfe07z().s[3]++,express.Router());// This is the right model because ^registerModels set it up for us.
const mongoDB_uri=(cov_1f32pfe07z().s[4]++,"mongodb+srv://sdgroup23username:sdgroup23pw@cluster0.4pi4i.mongodb.net/myFirstDatabase?retryWrites=true&w=majority");const client=(cov_1f32pfe07z().s[5]++,new MongoClient(mongoDB_uri,{useNewUrlParser:true,useUnifiedTopology:true}));cov_1f32pfe07z().s[6]++;client.connect().then(client=>{cov_1f32pfe07z().f[0]++;const db=(cov_1f32pfe07z().s[7]++,client.db("cluster0"));const user=(cov_1f32pfe07z().s[8]++,db.collection("user"));const quotehistory=(cov_1f32pfe07z().s[9]++,db.collection("quotehistory"));cov_1f32pfe07z().s[10]++;console.log("MongoDB successfully connected!");/* https://stackoverflow.com/questions/28715859/mongodb-nodejs-converting-circular-structure */cov_1f32pfe07z().s[11]++;router.route('/').get((req,res,next)=>{cov_1f32pfe07z().f[1]++;cov_1f32pfe07z().s[12]++;user.find({}).toArray(function(error,data){cov_1f32pfe07z().f[2]++;cov_1f32pfe07z().s[13]++;if(error){cov_1f32pfe07z().b[0][0]++;cov_1f32pfe07z().s[14]++;throw error;}else{cov_1f32pfe07z().b[0][1]++;}cov_1f32pfe07z().s[15]++;res.send(data);//console.log(data);
});});cov_1f32pfe07z().s[16]++;router.route('/history').get((req,res,next)=>{cov_1f32pfe07z().f[3]++;cov_1f32pfe07z().s[17]++;quotehistory.find({}).toArray(function(error,data){cov_1f32pfe07z().f[4]++;cov_1f32pfe07z().s[18]++;if(error){cov_1f32pfe07z().b[1][0]++;cov_1f32pfe07z().s[19]++;throw error;}else{cov_1f32pfe07z().b[1][1]++;}cov_1f32pfe07z().s[20]++;res.send(data);//console.log(data);
});});/* profile management */cov_1f32pfe07z().s[21]++;router.route('/update').post((req,res,next)=>{cov_1f32pfe07z().f[5]++;let filter=(cov_1f32pfe07z().s[22]++,{username:req.body.cookie_username});cov_1f32pfe07z().s[23]++;console.log('req.body: ',req.body);cov_1f32pfe07z().s[24]++;user.findOneAndUpdate(filter,{$set:{fullname:req.body.fullname,address1:req.body.address1,address2:req.body.address2,city:req.body.city,state:req.body.state,zip:req.body.zip}},{strict:true},(error,data)=>{cov_1f32pfe07z().f[6]++;cov_1f32pfe07z().s[25]++;if(error){cov_1f32pfe07z().b[2][0]++;cov_1f32pfe07z().s[26]++;res.status(500);cov_1f32pfe07z().s[27]++;console.log(error);cov_1f32pfe07z().s[28]++;return next(error);}else{cov_1f32pfe07z().b[2][1]++;cov_1f32pfe07z().s[29]++;res.status(200).json(data);cov_1f32pfe07z().s[30]++;console.log(`User ${req.body.username} updated successfully !`);}});});cov_1f32pfe07z().s[31]++;router.post('/history',(req,res,next)=>{cov_1f32pfe07z().f[7]++;cov_1f32pfe07z().s[32]++;quotehistory.find({username:req.body.username}).limit(0).toArray((error,result)=>{cov_1f32pfe07z().f[8]++;cov_1f32pfe07z().s[33]++;if(error){cov_1f32pfe07z().b[3][0]++;cov_1f32pfe07z().s[34]++;console.log(`Error trying to find user with username: ${req.body.username} quote history`);cov_1f32pfe07z().s[35]++;res.status(500).json({error:`Error trying to find user with username: ${req.body.username} quote history`});}else{cov_1f32pfe07z().b[3][1]++;cov_1f32pfe07z().s[36]++;console.log(`Quote history found for username: ${req.body.username}`);cov_1f32pfe07z().s[37]++;res.status(200).json(result);}});});cov_1f32pfe07z().s[38]++;router.post('/current_user',(req,res)=>{cov_1f32pfe07z().f[9]++;cov_1f32pfe07z().s[39]++;//console.log("req.body.username: ",req.body.username);
if((cov_1f32pfe07z().b[5][0]++,req.body.username==='')||(cov_1f32pfe07z().b[5][1]++,req.body.username===undefined)){cov_1f32pfe07z().b[4][0]++;cov_1f32pfe07z().s[40]++;console.log('Not logged in. req.body.username: ',req.body.username);cov_1f32pfe07z().s[41]++;res.status(404).json({error:`Not loggedin. req.body.username: ${req.body.username}`});}else{cov_1f32pfe07z().b[4][1]++;cov_1f32pfe07z().s[42]++;user.findOne({username:req.body.username},(err,user)=>{cov_1f32pfe07z().f[10]++;cov_1f32pfe07z().s[43]++;if(err){cov_1f32pfe07z().b[6][0]++;cov_1f32pfe07z().s[44]++;console.log("Error inside /current_user route: ",err);cov_1f32pfe07z().s[45]++;res.status(500).json({error:'Internal error, please try again'});}else{cov_1f32pfe07z().b[6][1]++;cov_1f32pfe07z().s[46]++;if(!user){cov_1f32pfe07z().b[7][0]++;cov_1f32pfe07z().s[47]++;console.log("Why did you successfully log in? Who are you ",req.body.username,"?");cov_1f32pfe07z().s[48]++;res.status(600).json({error:'Illegal login; user not found in database'});}else{cov_1f32pfe07z().b[7][1]++;cov_1f32pfe07z().s[49]++;console.log('User ',req.body.username,' information fetched successfully');cov_1f32pfe07z().s[50]++;res.status(200).json(user);}}});}});cov_1f32pfe07z().s[51]++;router.post('/authenticate',async(req,res,next)=>{cov_1f32pfe07z().f[11]++;const username=(cov_1f32pfe07z().s[52]++,req.body.username);cov_1f32pfe07z().s[53]++;console.log('username in /authenticate route: ',username);cov_1f32pfe07z().s[54]++;user.findOne({username:req.body.username},(err,user)=>{cov_1f32pfe07z().f[12]++;cov_1f32pfe07z().s[55]++;if(err){cov_1f32pfe07z().b[8][0]++;cov_1f32pfe07z().s[56]++;console.error(err);cov_1f32pfe07z().s[57]++;res.status(500).json({error:'Internal error, please try again'});}else{cov_1f32pfe07z().b[8][1]++;cov_1f32pfe07z().s[58]++;if(!user){cov_1f32pfe07z().b[9][0]++;cov_1f32pfe07z().s[59]++;res.status(601).json({error:'No user with given username found in database'});}else{cov_1f32pfe07z().b[9][1]++;cov_1f32pfe07z().s[60]++;bcrypt.compare(req.body.password,user.password,(err,data)=>{cov_1f32pfe07z().f[13]++;cov_1f32pfe07z().s[61]++;if(err){cov_1f32pfe07z().b[10][0]++;cov_1f32pfe07z().s[62]++;res.status(500).json({error:'Internal error, please try again'});}else{cov_1f32pfe07z().b[10][1]++;cov_1f32pfe07z().s[63]++;if(!data){cov_1f32pfe07z().b[11][0]++;cov_1f32pfe07z().s[64]++;res.status(401).json({error:'Incorrect password to given username'});}else{cov_1f32pfe07z().b[11][1]++;cov_1f32pfe07z().s[65]++;res.sendStatus(200);}}});}}});});/* registration */cov_1f32pfe07z().s[66]++;router.route('/create').post((req,res,next)=>{cov_1f32pfe07z().f[14]++;cov_1f32pfe07z().s[67]++;user.findOne({username:req.body.username}).then(account=>{cov_1f32pfe07z().f[15]++;cov_1f32pfe07z().s[68]++;if(account){cov_1f32pfe07z().b[12][0]++;cov_1f32pfe07z().s[69]++;console.log(`User ${req.body.username} existed!`);cov_1f32pfe07z().s[70]++;res.status(500).json('USER_EXISTED');}else{cov_1f32pfe07z().b[12][1]++;let newUser=(cov_1f32pfe07z().s[71]++,{username:req.body.username,password:req.body.password});cov_1f32pfe07z().s[72]++;bcrypt.genSalt(10).then(salt=>{cov_1f32pfe07z().f[16]++;cov_1f32pfe07z().s[73]++;return bcrypt.hash(newUser.password,salt);}).then(hash=>{cov_1f32pfe07z().f[17]++;cov_1f32pfe07z().s[74]++;user.insertOne({username:newUser.username,password:hash},{strict:false},(error,data)=>{cov_1f32pfe07z().f[18]++;cov_1f32pfe07z().s[75]++;if(error){cov_1f32pfe07z().b[13][0]++;cov_1f32pfe07z().s[76]++;console.log(error);cov_1f32pfe07z().s[77]++;return next(error);}else{cov_1f32pfe07z().b[13][1]++;cov_1f32pfe07z().s[78]++;res.sendStatus(200);cov_1f32pfe07z().s[79]++;console.log(`New user ${newUser.username} registered!`);}});});cov_1f32pfe07z().s[80]++;console.log(newUser.password);}});});cov_1f32pfe07z().s[81]++;router.route('/quoteupdate').post((req,res,next)=>{cov_1f32pfe07z().f[19]++;cov_1f32pfe07z().s[82]++;quotehistory.insertOne({username:req.body.username,gallons_requested:req.body.gallons_requested,delivery_address:req.body.delivery_address,delivery_date:req.body.delivery_date,price_per_gallon:req.body.price_per_gallon,amount_due:req.body.amount_due},{strict:false},(error,data)=>{cov_1f32pfe07z().f[20]++;cov_1f32pfe07z().s[83]++;if(error){cov_1f32pfe07z().b[14][0]++;cov_1f32pfe07z().s[84]++;console.log(error);cov_1f32pfe07z().s[85]++;return next(error);}else{cov_1f32pfe07z().b[14][1]++;cov_1f32pfe07z().s[86]++;res.status(200).json(data);cov_1f32pfe07z().s[87]++;console.log('/ / / Quote updated successfully ! / / /');}});});});cov_1f32pfe07z().s[88]++;client.close();cov_1f32pfe07z().s[89]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIucm91dGVzLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiYmNyeXB0IiwiTW9uZ29DbGllbnQiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJtb25nb0RCX3VyaSIsImNsaWVudCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbm5lY3QiLCJ0aGVuIiwiZGIiLCJ1c2VyIiwiY29sbGVjdGlvbiIsInF1b3RlaGlzdG9yeSIsImNvbnNvbGUiLCJsb2ciLCJyb3V0ZSIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJmaW5kIiwidG9BcnJheSIsImVycm9yIiwiZGF0YSIsInNlbmQiLCJwb3N0IiwiZmlsdGVyIiwidXNlcm5hbWUiLCJib2R5IiwiY29va2llX3VzZXJuYW1lIiwiZmluZE9uZUFuZFVwZGF0ZSIsIiRzZXQiLCJmdWxsbmFtZSIsImFkZHJlc3MxIiwiYWRkcmVzczIiLCJjaXR5Iiwic3RhdGUiLCJ6aXAiLCJzdHJpY3QiLCJzdGF0dXMiLCJqc29uIiwibGltaXQiLCJyZXN1bHQiLCJ1bmRlZmluZWQiLCJmaW5kT25lIiwiZXJyIiwiY29tcGFyZSIsInBhc3N3b3JkIiwic2VuZFN0YXR1cyIsImFjY291bnQiLCJuZXdVc2VyIiwiZ2VuU2FsdCIsInNhbHQiLCJoYXNoIiwiaW5zZXJ0T25lIiwiZ2FsbG9uc19yZXF1ZXN0ZWQiLCJkZWxpdmVyeV9hZGRyZXNzIiwiZGVsaXZlcnlfZGF0ZSIsInByaWNlX3Blcl9nYWxsb24iLCJhbW91bnRfZHVlIiwiY2xvc2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoid3JaQWVZOzJGQWZaLEdBQUlBLENBQUFBLE9BQU8sMEJBQUdDLE9BQU8sQ0FBQyxTQUFELENBQVYsQ0FBWCxDQUNBLEtBQU1DLENBQUFBLE1BQU0sMEJBQUdELE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBWixDQUNBLEtBQU1FLENBQUFBLFdBQVcsMEJBQUdGLE9BQU8sQ0FBQyxTQUFELENB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QUduQkMsZ0JBQWdCLENBQUV2QyxHQUFHLENBQUNXLElBQUosQ0FBUzRCLGdCQUhSLENBSW5CQyxhQUFhLENBQUV4QyxHQUFHLENBQUNXLElBQUosQ0FBUzZCLGFBSkwsQ0FLbkJDLGdCQUFnQixDQUFFekMsR0FBRyxDQUFDVyxJQUFKLENBQVM4QixnQkFMUixDQU1uQkMsVUFBVSxDQUFFMUMsR0FBRyxDQUFDVyxJQUFKLENBQVMrQixVQU5GLENBQXZCLENBT0csQ0FBQ3JCLE1BQU0sQ0FBRSxLQUFULENBUEgsQ0FPb0IsQ0FBQ2hCLEtBQUQsQ0FBUUMsSUFBUixHQUFpQixtREFDakMsR0FBSUQsS0FBSixDQUFXLHNEQUNQVCxPQUFPLENBQUNDLEdBQVIsQ0FBWVEsS0FBWixFQURPLHlCQUVQLE1BQU9ILENBQUFBLElBQUksQ0FBQ0csS0FBRCxDQUFYLENBQ0gsQ0FIRCxJQUdPLHNEQUNISixHQUFHLENBQUNxQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJqQixJQUFyQixFQURHLHlCQUVIVixPQUFPLENBQUNDLEdBQVIsQ0FBWSwwQ0FBWixFQUNILENBQ0osQ0FmRCxFQWdCSCxDQWpCRCxFQWtCSCxDQTFLTCxFLHlCQTRLQVYsTUFBTSxDQUFDd0QsS0FBUCxHLHlCQUNBQyxNQUFNLENBQUNDLE9BQVAsQ0FBaUI3RCxNQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImxldCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKFwiYmNyeXB0anNcIik7XG5jb25zdCBNb25nb0NsaWVudCA9IHJlcXVpcmUoJ21vbmdvZGInKS5Nb25nb0NsaWVudDtcblxubGV0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG4vLyBUaGlzIGlzIHRoZSByaWdodCBtb2RlbCBiZWNhdXNlIF5yZWdpc3Rlck1vZGVscyBzZXQgaXQgdXAgZm9yIHVzLlxuXG5jb25zdCBtb25nb0RCX3VyaSA9IFwibW9uZ29kYitzcnY6Ly9zZGdyb3VwMjN1c2VybmFtZTpzZGdyb3VwMjNwd0BjbHVzdGVyMC40cGk0aS5tb25nb2RiLm5ldC9teUZpcnN0RGF0YWJhc2U/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5XCI7XG5jb25zdCBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQobW9uZ29EQl91cmksIHt1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZX0pO1xuY2xpZW50LmNvbm5lY3QoKVxuICAgIC50aGVuKGNsaWVudCA9PiB7XG4gICAgICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKFwiY2x1c3RlcjBcIik7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBkYi5jb2xsZWN0aW9uKFwidXNlclwiKTtcbiAgICAgICAgY29uc3QgcXVvdGVoaXN0b3J5ID0gZGIuY29sbGVjdGlvbihcInF1b3RlaGlzdG9yeVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhcIk1vbmdvREIgc3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCFcIik7XG5cbiAgICAgICAgLyogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjg3MTU4NTkvbW9uZ29kYi1ub2RlanMtY29udmVydGluZy1jaXJjdWxhci1zdHJ1Y3R1cmUgKi9cbiAgICAgICAgcm91dGVyLnJvdXRlKCcvJykuZ2V0KChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICAgICAgdXNlci5maW5kKHt9KS50b0FycmF5KGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pXG5cbiAgICAgICAgcm91dGVyLnJvdXRlKCcvaGlzdG9yeScpLmdldCgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgICAgIHF1b3RlaGlzdG9yeS5maW5kKHt9KS50b0FycmF5KGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pXG5cbiAgICAgICAgLyogcHJvZmlsZSBtYW5hZ2VtZW50ICovXG4gICAgICAgIHJvdXRlci5yb3V0ZSgnL3VwZGF0ZScpLnBvc3QoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgICAgICBsZXQgZmlsdGVyID0ge3VzZXJuYW1lOiByZXEuYm9keS5jb29raWVfdXNlcm5hbWV9O1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcS5ib2R5OiAnLCByZXEuYm9keSlcbiAgICAgICAgICAgIHVzZXIuZmluZE9uZUFuZFVwZGF0ZShmaWx0ZXIsIHtcbiAgICAgICAgICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGxuYW1lOiByZXEuYm9keS5mdWxsbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczE6IHJlcS5ib2R5LmFkZHJlc3MxLFxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzMjogcmVxLmJvZHkuYWRkcmVzczIsXG4gICAgICAgICAgICAgICAgICAgIGNpdHk6IHJlcS5ib2R5LmNpdHksXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiByZXEuYm9keS5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgemlwOiByZXEuYm9keS56aXBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7c3RyaWN0OiB0cnVlfSwgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFVzZXIgJHtyZXEuYm9keS51c2VybmFtZX0gdXBkYXRlZCBzdWNjZXNzZnVsbHkgIWApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcblxuICAgICAgICByb3V0ZXIucG9zdCgnL2hpc3RvcnknLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgICAgIHF1b3RlaGlzdG9yeS5maW5kKHt1c2VybmFtZTogcmVxLmJvZHkudXNlcm5hbWV9KS5saW1pdCgwKS50b0FycmF5KChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciB0cnlpbmcgdG8gZmluZCB1c2VyIHdpdGggdXNlcm5hbWU6ICR7cmVxLmJvZHkudXNlcm5hbWV9IHF1b3RlIGhpc3RvcnlgKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe2Vycm9yOiBgRXJyb3IgdHJ5aW5nIHRvIGZpbmQgdXNlciB3aXRoIHVzZXJuYW1lOiAke3JlcS5ib2R5LnVzZXJuYW1lfSBxdW90ZSBoaXN0b3J5YH0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFF1b3RlIGhpc3RvcnkgZm91bmQgZm9yIHVzZXJuYW1lOiAke3JlcS5ib2R5LnVzZXJuYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgfSlcblxuICAgICAgICByb3V0ZXIucG9zdCgnL2N1cnJlbnRfdXNlcicsIChyZXEsIHJlcykgPT4ge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInJlcS5ib2R5LnVzZXJuYW1lOiBcIixyZXEuYm9keS51c2VybmFtZSk7XG5cbiAgICAgICAgICAgIGlmIChyZXEuYm9keS51c2VybmFtZSA9PT0gJycgfHwgcmVxLmJvZHkudXNlcm5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOb3QgbG9nZ2VkIGluLiByZXEuYm9keS51c2VybmFtZTogJywgcmVxLmJvZHkudXNlcm5hbWUpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtlcnJvcjogYE5vdCBsb2dnZWRpbi4gcmVxLmJvZHkudXNlcm5hbWU6ICR7cmVxLmJvZHkudXNlcm5hbWV9YH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgdXNlci5maW5kT25lKHt1c2VybmFtZTogcmVxLmJvZHkudXNlcm5hbWV9LCAoZXJyLCB1c2VyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgaW5zaWRlIC9jdXJyZW50X3VzZXIgcm91dGU6IFwiLCBlcnIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ZXJyb3I6ICdJbnRlcm5hbCBlcnJvciwgcGxlYXNlIHRyeSBhZ2Fpbid9KVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIldoeSBkaWQgeW91IHN1Y2Nlc3NmdWxseSBsb2cgaW4/IFdobyBhcmUgeW91IFwiLCByZXEuYm9keS51c2VybmFtZSwgXCI/XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDYwMCkuanNvbih7ZXJyb3I6ICdJbGxlZ2FsIGxvZ2luOyB1c2VyIG5vdCBmb3VuZCBpbiBkYXRhYmFzZSd9KVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgJywgcmVxLmJvZHkudXNlcm5hbWUsICcgaW5mb3JtYXRpb24gZmV0Y2hlZCBzdWNjZXNzZnVsbHknKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24odXNlcilcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICByb3V0ZXIucG9zdCgnL2F1dGhlbnRpY2F0ZScsIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdXNlcm5hbWUgPSByZXEuYm9keS51c2VybmFtZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2VybmFtZSBpbiAvYXV0aGVudGljYXRlIHJvdXRlOiAnLCB1c2VybmFtZSk7XG5cbiAgICAgICAgICAgIHVzZXIuZmluZE9uZSh7dXNlcm5hbWU6IHJlcS5ib2R5LnVzZXJuYW1lfSwgKGVyciwgdXNlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qc29uKHtlcnJvcjogJ0ludGVybmFsIGVycm9yLCBwbGVhc2UgdHJ5IGFnYWluJ30pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg2MDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAuanNvbih7ZXJyb3I6ICdObyB1c2VyIHdpdGggZ2l2ZW4gdXNlcm5hbWUgZm91bmQgaW4gZGF0YWJhc2UnfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmNyeXB0LmNvbXBhcmUocmVxLmJvZHkucGFzc3dvcmQsIHVzZXIucGFzc3dvcmQsIChlcnIsIGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpzb24oe2Vycm9yOiAnSW50ZXJuYWwgZXJyb3IsIHBsZWFzZSB0cnkgYWdhaW4nfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qc29uKHtlcnJvcjogJ0luY29ycmVjdCBwYXNzd29yZCB0byBnaXZlbiB1c2VybmFtZSd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoMjAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIH0pXG5cbiAgICAgICAgLyogcmVnaXN0cmF0aW9uICovXG4gICAgICAgIHJvdXRlci5yb3V0ZSgnL2NyZWF0ZScpLnBvc3QoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgICAgICB1c2VyLmZpbmRPbmUoe3VzZXJuYW1lOiByZXEuYm9keS51c2VybmFtZX0pLnRoZW4oYWNjb3VudCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFVzZXIgJHtyZXEuYm9keS51c2VybmFtZX0gZXhpc3RlZCFgKVxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbignVVNFUl9FWElTVEVEJylcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VXNlciA9IHt1c2VybmFtZTogcmVxLmJvZHkudXNlcm5hbWUsIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZH07XG4gICAgICAgICAgICAgICAgICAgIGJjcnlwdC5nZW5TYWx0KDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHNhbHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmNyeXB0Lmhhc2gobmV3VXNlci5wYXNzd29yZCwgc2FsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKChoYXNoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyLmluc2VydE9uZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IG5ld1VzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGhhc2hcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtzdHJpY3Q6IGZhbHNlfSwgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDIwMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYE5ldyB1c2VyICR7bmV3VXNlci51c2VybmFtZX0gcmVnaXN0ZXJlZCFgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobmV3VXNlci5wYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG5cbiAgICAgICAgcm91dGVyLnJvdXRlKCcvcXVvdGV1cGRhdGUnKS5wb3N0KChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICAgICAgcXVvdGVoaXN0b3J5Lmluc2VydE9uZSh7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHJlcS5ib2R5LnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIGdhbGxvbnNfcmVxdWVzdGVkOiByZXEuYm9keS5nYWxsb25zX3JlcXVlc3RlZCxcbiAgICAgICAgICAgICAgICBkZWxpdmVyeV9hZGRyZXNzOiByZXEuYm9keS5kZWxpdmVyeV9hZGRyZXNzLFxuICAgICAgICAgICAgICAgIGRlbGl2ZXJ5X2RhdGU6IHJlcS5ib2R5LmRlbGl2ZXJ5X2RhdGUsXG4gICAgICAgICAgICAgICAgcHJpY2VfcGVyX2dhbGxvbjogcmVxLmJvZHkucHJpY2VfcGVyX2dhbGxvbixcbiAgICAgICAgICAgICAgICBhbW91bnRfZHVlOiByZXEuYm9keS5hbW91bnRfZHVlXG4gICAgICAgICAgICB9LCB7c3RyaWN0OiBmYWxzZX0sIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJy8gLyAvIFF1b3RlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5ICEgLyAvIC8nKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfSk7XG5cbmNsaWVudC5jbG9zZSgpO1xubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG4iXX0=